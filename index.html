<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>PG - Perfect Gaming</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;500;800&display=swap');

*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:'Heebo',sans-serif;
  background:radial-gradient(circle at top,#220000,#050000);
  color:#fff;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  overflow-x:hidden;
}

/* ===== CANVAS EFFECTS ===== */
#effectCanvas{ position:fixed; inset:0; z-index:10000; pointer-events:none; }

/* ===== INTRO SCREEN ===== */
#intro{
  position:fixed; inset:0;
  background:radial-gradient(circle at top,#220000,#050000);
  z-index:9998; display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.intro-fade-out {
  opacity: 0;
  transform: scale(1.5);
  filter: blur(10px);
  pointer-events: none;
}

.intro-logo-wrapper{
  width:180px; height:180px; border-radius:30px; padding:10px;
  background:rgba(255,0,0,0.3); box-shadow:0 0 60px red, 0 0 80px rgba(255,0,0,0.5);
  display:flex; align-items:center; justify-content:center; animation:spin 6s linear infinite;
}

.intro-logo{ width:160px; height:160px; border-radius:24px; background:url("PGLOGOGIF.gif") center/cover no-repeat; }
#intro h1{ margin-top:30px; font-size:42px; letter-spacing:4px; text-shadow:0 0 20px red,0 0 40px white; }
#progressBar{ margin-top:30px; width:80%; max-width:400px; height:25px; border:2px solid red; border-radius:15px; overflow:hidden; position:relative; }
#progress{ width:0%; height:100%; background:linear-gradient(90deg,white,red); transition:width 0.05s linear; }
#progressPercent{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:16px; color:white; text-shadow:0 0 8px red; }

/* ===== LOGO & STATUS ===== */
.logo-wrapper{ margin-top:40px; z-index:10; display:flex; flex-direction:column; align-items:center; width:100%; }
.logo-frame{ width:160px; height:160px; border-radius:25px; padding:10px; background:rgba(255,0,0,0.3); box-shadow:0 0 50px red; display:flex; align-items:center; justify-content:center; animation:spin 20s linear infinite; }
.logo{ width:140px; height:140px; border-radius:20px; background:url("PGLOGOGIF.gif") center/cover no-repeat; box-shadow:0 0 40px rgba(255,0,0,.7); transition: .3s; }
.logo:hover{ transform:scale(1.1); }

#serverButton{ margin-top:20px; padding:12px 24px; font-size:18px; font-weight:bold; color:white; background:linear-gradient(45deg,darkred,red); border-radius:30px; text-decoration:none; box-shadow:0 0 25px red; transition: .3s; z-index:10; }
#serverButton:hover{ transform:scale(1.1); filter: brightness(1.2); }

.server-status-card {
    margin-top: 25px; background: rgba(30, 0, 0, 0.85);
    border: 1px solid red; border-radius: 50px; padding: 12px 30px;
    display: flex; flex-direction: row; align-items: center; gap: 20px;
    box-shadow: 0 0 25px rgba(255, 0, 0, 0.4); direction: rtl; z-index: 10;
}
.dot { width: 12px; height: 12px; border-radius: 50%; background: #4ade80; box-shadow: 0 0 10px #4ade80; }
.dot.offline { background: #ff4d4d; box-shadow: 0 0 10px #ff4d4d; }

.refresh-btn {
    background: none; border: none; color: white; cursor: pointer;
    font-size: 20px; display: flex; align-items: center; justify-content: center;
    transition: 0.3s; padding: 5px;
}
.refresh-btn:hover { color: red; transform: rotate(90deg); }

header{text-align:center;max-width:800px;z-index:10;padding:20px}
header h1{font-size:44px;margin:20px 0;text-shadow:0 0 15px red;}

.separator{ width:120px;height:3px;background:red; margin:40px 0;border-radius:10px;z-index:10; }

.section{padding:40px 20px;text-align:center;max-width:1100px;z-index:10; width:100%;}
.section h2{color:red;font-size:34px;margin-bottom:40px;text-shadow:0 0 10px red;}

.cards{display:flex;justify-content:center;gap:20px;flex-wrap:wrap}
.card{ width:280px; background:rgba(255,0,0,0.15); border:1px solid red; border-radius:18px; padding:25px; transition:.3s; text-decoration:none; color:inherit; display:flex; flex-direction:column; gap:10px; }
.card:hover{ transform:scale(1.05); box-shadow:0 0 40px red; background:rgba(255,0,0,0.25); }
.card h3{color:red;}
.card p{color:#ffd6d6; font-size:14px; line-height:1.5;}

.vs-container{ display:flex; align-items:center; justify-content:center; gap:30px; flex-wrap:wrap; }
.vs{ font-size:56px; font-weight:800; color:white; text-shadow:0 0 20px red; animation:vsPulse 2s infinite; }
@keyframes vsPulse{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.15)} }

#timer{ font-size:24px; font-weight:bold; color:white; text-align:center; text-shadow:0 0 15px red; margin-bottom:20px; }
.schedule-list{ list-style:none; max-width:450px; margin:auto; direction: rtl; text-align: right; }
.schedule-list li{ padding:12px; margin-bottom:8px; border-radius:10px; font-weight:bold; background:rgba(255,0,0,0.1); border-right:4px solid red; }
.schedule-list .night{ background:linear-gradient(45deg,darkred,red); box-shadow:0 0 20px red; text-align: center; border:none; margin-top:15px; }

footer{ padding:40px; color:#ff8c8c; width:100%; text-align:center; z-index:10; font-size:14px; line-height: 1.8; }

@keyframes spin{ 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }
</style>
</head>

<body>

<canvas id="effectCanvas"></canvas>

<div id="intro">
  <div class="intro-logo-wrapper"><div class="intro-logo"></div></div>
  <h1>PG MILSIM</h1>
  <div id="progressBar"><div id="progress"></div><span id="progressPercent">0%</span></div>
</div>

<div class="logo-wrapper">
  <div class="logo-frame"><div class="logo"></div></div>
  <a href="fivem://connect/9p77qb" id="serverButton">התחברות לשרת</a>
  
  <div class="server-status-card">
      <div style="display:flex; align-items:center; gap:10px;">
          <div id="statusDot" class="dot"></div>
          <span id="statusTxt" style="font-weight:800;">טוען...</span>
      </div>
      <div>שחקנים: <b id="playerCount" style="color:red; font-size:18px;">--</b></div>
      <button class="refresh-btn" onclick="fetchStatus()" title="רענן">↻</button>
  </div>
</div>

<header>
  <h1>PG - Perfect Gaming</h1>
  <p>שרת RolePlay מלחמתי אינטנסיבי המבוסס על טקטיקה ומשמעת.</p>
</header>

<div class="separator"></div>

<section class="section">
  <h2>תיאור המשחק</h2>
  <div class="vs-container">
    <div class="card">
      <h3>ארגון PG</h3>
      <p>ארגון לוחם הפועל במבצעים חשאיים, שליטה אזורית ופשיטות מתוכננות.</p>
    </div>
    <div class="vs">VS</div>
    <div class="card">
      <h3>צה״ל</h3>
      <p>כוח צבאי סדור עם פיקוד ברור, משמעת גבוהה וניהול לחימה מאורגן.</p>
    </div>
  </div>
</section>

<div class="separator"></div>

<section class="section">
  <h2>⏱ לוח זמנים – אימונים ולחימה</h2>
  <div id="timer">טוען...</div>
  <ul class="schedule-list">
    <li>11:00 – אימון</li>
    <li>12:00 – לחימה</li>
    <li>13:00 – אימון</li>
    <li>14:00 – לחימה</li>
    <li>15:00 – אימון</li>
    <li>16:00 – לחימה</li>
    <li>17:00 – אימון</li>
    <li>18:00 – לחימה</li>
    <li>19:00 – לחימה</li>
    <li>20:00 – לחימה</li>
    <li>21:00 – אימון</li>
    <li class="night">22:00 – עד הבוקר לחימה ללא הגבלה</li>
  </ul>
</section>

<div class="separator"></div>

<section class="section">
  <h2>קישורים</h2>
  <div class="cards">
    <a class="card" href="https://discord.gg/epE6e2T4W8" target="_blank"><h3>שרת דיסקורד</h3></a>
    <a class="card" href="https://osublo3211-gif.github.io/perfectgaming-unban/?v=3" target="_blank"><h3>קניית unban</h3></a>
    <a class="card" href="https://my.israelgives.org/he/campaign/pgmilsim" target="_blank"><h3>תרומות</h3></a>
  </div>
</section>

<footer>
  © Pg - Perfect Gaming | 2026<br>
  נוצר על ידי Yossi Shalom / Oz
</footer>

<script>
// --- חיבור אמיתי לסטטוס שרת ---
async function fetchStatus() {
    const statusTxt = document.getElementById("statusTxt");
    const playerCount = document.getElementById("playerCount");
    const dot = document.getElementById("statusDot");
    
    statusTxt.textContent = "מעדכן...";
    
    try {
        const response = await fetch(`https://api.codetabs.com/v1/proxy?quest=https://servers-frontend.fivem.net/api/servers/single/9p77qb`);
        const data = await response.json();
        
        if (data && data.Data) {
            statusTxt.textContent = "ONLINE";
            statusTxt.style.color = "#4ade80";
            dot.classList.remove("offline");
            playerCount.textContent = `${data.Data.clients} / ${data.Data.sv_maxclients}`;
        } else {
            throw new Error();
        }
    } catch (e) { 
        statusTxt.textContent = "OFFLINE";
        statusTxt.style.color = "#ff4d4d";
        dot.classList.add("offline");
        playerCount.textContent = "0 / 0";
    }
}
fetchStatus();
setInterval(fetchStatus, 60000);

// --- אינטרו ---
let prg=0;
const ivl=setInterval(()=>{
  prg++;
  document.getElementById("progress").style.width=prg+"%";
  document.getElementById("progressPercent").textContent=prg+"%";
  if(prg>=100){
    clearInterval(ivl);
    document.getElementById("intro").classList.add("intro-fade-out");
    setTimeout(()=>document.getElementById("intro").remove(),800);
  }
},30);

// --- טיימר חכם ללו"ז ---
const schedule = [
  {h:11, m:0, label: "אימון"}, {h:12, m:0, label: "לחימה"}, {h:13, m:0, label: "אימון"},
  {h:14, m:0, label: "לחימה"}, {h:15, m:0, label: "אימון"}, {h:16, m:0, label: "לחימה"},
  {h:17, m:0, label: "אימון"}, {h:18, m:0, label: "לחימה"}, {h:19, m:0, label: "לחימה"},
  {h:20, m:0, label: "לחימה"}, {h:21, m:0, label: "אימון"}, {h:22, m:0, label: "לחימת לילה"}
];

function updateTimer(){
  const now = new Date();
  let targetEvent = null;
  for (let event of schedule) {
    let eventTime = new Date();
    eventTime.setHours(event.h, event.m, 0, 0);
    if (eventTime > now) { targetEvent = { time: eventTime, label: event.label }; break; }
  }
  if (!targetEvent) {
    let tomorrow = new Date(); tomorrow.setDate(tomorrow.getDate() + 1);
    tomorrow.setHours(schedule[0].h, schedule[0].m, 0, 0);
    targetEvent = { time: tomorrow, label: schedule[0].label };
  }
  let diff = Math.floor((targetEvent.time - now) / 1000);
  const h = Math.floor(diff / 3600).toString().padStart(2, '0');
  const m = Math.floor((diff % 3600) / 60).toString().padStart(2, '0');
  const s = (diff % 60).toString().padStart(2, '0');
  document.getElementById("timer").textContent = `${h}:${m}:${s} עד ${targetEvent.label}`;
}
setInterval(updateTimer,1000); updateTimer();

// --- אפקטים ---
const c=document.getElementById("effectCanvas");
const ctx=c.getContext("2d");
function resize(){c.width=window.innerWidth; c.height=window.innerHeight;}
resize(); window.addEventListener("resize", resize);

let snow=[...Array(150)].map(()=>({x:Math.random()*c.width, y:Math.random()*c.height, r:Math.random()*2+1, s:Math.random()*0.15+0.05}));
let lightning=[], last=0, shake=0;

function draw(){
  ctx.clearRect(0,0,c.width,c.height);
  ctx.fillStyle="rgba(255,255,255,0.7)";
  snow.forEach(s=>{
    ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill();
    s.y+=s.s; if(s.y>c.height) s.y=0;
  });
  if(Date.now()-last > 4000+Math.random()*4000){
    let x=Math.random()*c.width, y=0, path=[];
    while(y<c.height){y+=20; x+=Math.random()*40-20; path.push({x,y})}
    lightning.push({path,life:20}); last=Date.now(); shake=5;
  }
  lightning.forEach((l,i)=>{
    ctx.beginPath(); ctx.moveTo(l.path[0].x, l.path[0].y);
    l.path.forEach(p=>ctx.lineTo(p.x,p.y));
    ctx.strokeStyle="rgba(255,255,255,"+(l.life/20)+")"; ctx.lineWidth=2; ctx.stroke();
    l.life--; if(l.life<=0) lightning.splice(i,1);
  });
  if(shake>0){
    c.style.transform=`translate(${(Math.random()-0.5)*shake}px, ${(Math.random()-0.5)*shake}px)`;
    shake--;
  } else c.style.transform='translate(0,0)';
  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
